<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Inventory Tracker</title>
  <style>
    body { font-family: Arial, sans-serif; background: #f5f6fa; padding: 20px; }
    .container { max-width: 1000px; margin: auto; background: white; padding: 20px; border-radius: 10px; }
    h1 { text-align: center; }
    table { width: 100%; border-collapse: collapse; margin-top: 20px; }
    th, td { border: 1px solid #ddd; padding: 8px; }
    th { background: #4CAF50; color: white; }
    .controls { margin: 15px 0; display: flex; gap: 10px; flex-wrap: wrap; }
    input, button { padding: 8px; border-radius: 5px; border: 1px solid #ccc; }
    button { cursor: pointer; background: #4CAF50; color: white; border: none; }
    .delete-btn { background: #e74c3c; }
  </style>
</head>
<body>
  <div class="container">
    <h1>üì¶ Google Sheet Inventory</h1>
    <div class="controls">
      <input type="text" id="itemName" placeholder="Item Name">
      <input type="number" id="itemPrice" placeholder="Price">
      <input type="text" id="itemColor" placeholder="Color">
      <input type="number" id="itemStock" placeholder="Stock">
      <button onclick="addItem()">‚ûï Add Item</button>
    </div>
    <table>
      <thead>
        <tr>
          <th>Item Name</th><th>Price</th><th>Color</th><th>Stock</th><th>Status</th><th>Action</th>
        </tr>
      </thead>
      <tbody id="inventoryTableBody"></tbody>
    </table>
  </div>

<script>
const API = "YOUR_WEB_APP_URL"; 
let inventory = [];

async function loadInventory() {
  const res = await fetch(API);
  inventory = await res.json();
  updateTable();
}

async function addItem() {
  const item = {
    action: "add",
    "Item Name": document.getElementById('itemName').value,
    "Price": parseFloat(document.getElementById('itemPrice').value) || 0,
    "Color": document.getElementById('itemColor').value,
    "Stock": parseInt(document.getElementById('itemStock').value) || 0
  };
  await fetch(API, {method:"POST", body:JSON.stringify(item)});
  await loadInventory();
}

async function updateStock(index, change) {
  const newStock = Math.max(0, (inventory[index].Stock || 0) + change);
  await fetch(API, {
    method:"POST",
    body:JSON.stringify({action:"update", index, Stock:newStock})
  });
  await loadInventory();
}

async function removeItem(index) {
  await fetch(API, {
    method:"POST",
    body:JSON.stringify({action:"delete", index})
  });
  await loadInventory();
}

function updateTable() {
  const tbody = document.getElementById("inventoryTableBody");
  tbody.innerHTML = "";
  inventory.forEach((item, i) => {
    const row = `
      <tr>
        <td>${item["Item Name"]}</td>
        <td>$${item["Price"]}</td>
        <td>${item["Color"]}</td>
        <td>
          <button onclick="updateStock(${i},-1)">-</button>
          ${item["Stock"]}
          <button onclick="updateStock(${i},1)">+</button>
        </td>
        <td>${item["Stock"]>0?"‚úÖ In Stock":"‚ùå Out of Stock"}</td>
        <td><button class="delete-btn" onclick="removeItem(${i})">Delete</button></td>
      </tr>`;
    tbody.innerHTML += row;
  });
}

loadInventory();
</script>
</body>
</html>
